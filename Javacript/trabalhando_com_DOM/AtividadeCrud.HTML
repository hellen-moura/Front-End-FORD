<!-- Criar um sistema de gerenciamento de usuários. Para isso voce precisa realizar o seguinte processo:
Criação de um menu com as 4 operações que o usuário pode realizar (Cadastrar, listar, atualizar, deletar)
realizar a criação dos métodos com switch case para validar as opções do usuário
Utilizar arrays, métodos, operadores unários, aritméticos, etc
Quando realizar o cadastro do usuário, realizar também a data de cadastro do usuário (quando ele foi criado) e exibir o usuário, o email e a data que o usuário foi criando
Cadastro: Nome, email e senha
Listagem: Data de criação(atual), nome, email e senha
atualizar: com base no email e senha
excluir: com base no email -->

<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agenda Contato</title>
</head>

<body>
    <script>
        let escolhaUsuario;
            const dataAtual = new Date();
            dataAtual.toLocaleString('pt-BR', { timezone: 'UTC' });
        //Exercício 3: Agenda de contatos com edição
        //Crie uma agenda de contatos que permita cadastrar,
        //vizualizar, editar e excluir contatos,
        //Utilize switch-case while e estruturas condicionais para gerencias as operações.
        let loopBrake = true
        let arrayAgenda = []
        while (loopBrake) {
            // Criação de um menu com as 4 operações que o usuário pode realizar (Cadastrar, listar, atualizar, deletar)
            let escolhaUsuario = parseInt(prompt(`
            

       Escolha uma opção abaixo:
      ---------------------------
        [1] Cadastrar Úsuario
        [2] Vizualizar um úsuario
        [3] Atualziar email
        [4] Atualizar senha
        [5] Excluir um úsuario
        [6] Sair do programa CRUD
       ` ))

            //realizar a criação dos métodos com switch case para validar as opções do usuário
            //Cadastro: Nome, email e senha
            //Listagem: Data de criação(atual), nome, email e senha

            switch (escolhaUsuario) {
                case 1:
                    //Criar a variável para receber a data atual e exibir na agenda

                    let nome = prompt("Informe seu primeiro nome:")
                    let email = prompt("Informe seu email:")
                    let senha = prompt("Informe a sua senha:")

                    arrayAgenda.push({ nome, email, senha, dataAtual })

                    // console.log(arrayAgenda)
                    alert("Úsuario cadastrado com sucesso na agenda!")
                    break;


                case 2:
                    //listagem dos dados => percorrer o array de objetos (forEach - for)

                    let listaDeContatos = "Lista de contatos: \n";
                    for (let listaArray of arrayAgenda) {
                        listaDeContatos += `Nome: ${listaArray.nome}, Email: ${listaArray.email}, Senha:${listaArray.senha}, data de criação: ${dataAtual.toLocaleString('pt-BR', { timezone: 'UTC' })}\n`
                        
                    }
                    
                    alert(listaDeContatos)

                    break;


                case 3:
                    //realizar método de atualizar agenda
                    //atualizar: com base no email 
                    let emailAtualizar = prompt("Informe o seu email para realizar a edição:")
                    let emailBuscado = arrayAgenda.find(findUser => findUser.email === emailAtualizar)
                    let dataAtual= ${dataAtual.toLocaleString('pt-BR', { timezone: 'UTC' })}\n`
                        }

                    

                    if (emailBuscado) {
                        emailBuscado.email = prompt("informe o seu novo email:")

                        alert("email atualizado com sucesso")
                    } else {
                        alert("Nenhum usuário foi encontrado no sistema!")
                    }
                    break;


                case 4:
                    //realizar método de atualizar agenda
                    //atualizar: com base na senha

                    let senhaAtualizar = prompt("Informe a sua senha realizar a edição:")
                    let senhaBuscado = arrayAgenda.find(findUser => findUser.senha === senhaAtualizar)

                    if (senhaBuscado) {
                        senhaBuscado.senha = prompt("informe a sua nova senha:")
                        alert("Senha alterada com sucesso")
                    } else {
                        alert("Nenhum usuário foi encontrado no sistema!")
                    }

                    break;


                case 5:
                    //excluir: com base no email -->

                    let emailExcluir = prompt("Informe o seu email para excluir da lista:")
                    let emailBuscadoExcluir = arrayAgenda.findIndex(deleteUser => deleteUser.email === emailExcluir) 

                    if (emailBuscadoExcluir !== -1) {
                        arrayAgenda.splice(emailBuscadoExcluir, 1)
                    }
                    else {
                        alert("nenhum usuário foi encontrado no sistema!")
                    }

                    break;


                case 6:
                    alert("Até a próxima, velho amigo.")
                    loopBrake = false
                    //process.exit();
                    break;


                default:
                    alert("Opção inválida. Tente Novamente")
                    break;
            }
        }
    </script>

</body>

</html>